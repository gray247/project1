<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>SnipBoard</title>

    <link rel="stylesheet" href="styles.css" />
    <meta http-equiv="Content-Security-Policy" content="script-src 'self' 'unsafe-inline';" />
  </head>

  <body>
    <div id="app">
      <header class="app-header">
        <div class="brand">
          <div class="title app-title">SnipBoard</div>
        </div>
        <div class="header-actions"></div>
      </header>

      <div class="toolbar">
        <div class="tabs-wrap">
          <div id="sectionTabs" class="section-tabs"></div>
        </div>

        <div class="toolbar-actions" id="toolbar-right">
          <div class="quick-tools" id="topbarTools">
            <input id="searchInput" placeholder="Search..." />
            <button id="sortToggleBtn" class="tool-btn">Sort</button>
            <button id="filterToggleBtn" class="tool-btn">Filter</button>
          </div>
          <div id="sortMenu" class="tool-menu">
            <div class="tool-menu__title">Sort</div>
            <label class="tool-option">
              <input type="radio" name="sortMode" value="default" checked />
              Default order
            </label>
            <label class="tool-option">
              <input type="radio" name="sortMode" value="newest" />
              Newest first
            </label>
            <label class="tool-option">
              <input type="radio" name="sortMode" value="oldest" />
              Oldest first
            </label>
            <label class="tool-option">
              <input type="radio" name="sortMode" value="title" />
              Title A-Z
            </label>
          </div>
          <div id="filterMenu" class="tool-menu">
            <div class="tool-menu__title">Filter</div>
            <div class="tool-filter">
              <label for="tagFilterInput">Tags (comma separated)</label>
              <input id="tagFilterInput" placeholder="tag1, tag2" />
            </div>
            <div class="tool-menu__actions">
              <button id="filterClearBtn" class="ghost">Clear</button>
              <button id="filterApplyBtn">Apply</button>
            </div>
          </div>
          <div class="export-controls">
            <div class="export-label">Export folder:</div>
            <div class="export-actions">
              <button id="setExportBtn" class="ghost">Set export folder</button>
              <button id="clearExportBtn" class="ghost danger">Clear</button>
            </div>
            <div id="exportPathDisplay" class="export-path"></div>
          </div>
        </div>
      </div>

      <div class="content">
        <aside id="clipPane">
        <div class="list-header">
          <div id="clipSidebarHeader" class="sidebar-header">
            <div id="clipTabName"></div>
            <div id="clipTabPath"></div>
          </div>
            <div class="list-controls">
              <button id="listAddBtn" class="pill sidebar-add-btn" title="New clip in current section">+</button>
            </div>
          </div>
          <div id="clipList" class="clip-list"></div>
        </aside>

        <main id="editor">
          <div class="main-actions editor-actions">
            <button id="saveClipBtn">Save Clip</button>
            <button id="deleteClipBtn" class="danger">Delete</button>
            <button id="addShotBtn" class="ghost">+ Add Screenshot</button>
          </div>
          <div class="field-row title-row">
            <div>
              <label>Title</label>
              <input id="titleInput" />
            </div>
            <div>
              <label>Section</label>
              <select id="sectionSelect" class="section-select"></select>
            </div>
          </div>

          <div class="field-row">
            <label>Text</label>
            <textarea id="textInput" class="tall"></textarea>
          </div>

          <div class="field-row">
            <label>Screenshots</label>
            <div id="screenshotContainer" class="screenshot-strip"></div>
          </div>

          <div class="field-row split tags-row">
            <div class="tags-col">
              <label>Tags</label>
              <input id="tagsInput" />
            </div>
            <div class="captured-col">
              <label>Captured At</label>
              <input id="capturedAtInput" readonly />
            </div>
          </div>

          <div class="field-row">
            <label>Notes</label>
            <textarea id="notesInput"></textarea>
          </div>

          <div id="sourceRow" class="field-row triple-row">
            <div class="captured-col">
              <label>Captured At</label>
              <input id="capturedAtInput" readonly />
            </div>
            <div class="source-url">
              <label>Source URL</label>
              <div class="source-input">
                <input id="sourceUrlInput" />
                <button id="openSourceBtn" title="Open source URL" class="ghost">
                  Open
                </button>
              </div>
            </div>
            <div class="source-title">
              <label>Source Title</label>
              <input id="sourceTitleInput" />
            </div>
          </div>
        </main>
      </div>
    </div>

    <script src="state.js"></script>
    <script src="ipc.js"></script>
    <script src="modals.js"></script>
    <script src="ui_tabs.js"></script>
    <script src="ui_clips.js"></script>
    <script src="ui_editor.js"></script>
    <script defer src="renderer.js"></script>
    <div id="tabContextMenu" class="context-menu">
      <ul>
        <li data-action="rename">Rename</li>
        <li data-action="schema">Configure Fields...</li>
        <li data-action="color">Change Color</li>
        <li data-action="icon">Change Icon</li>
        <li data-action="folder">Set Export Folder</li>
        <li data-action="lock">Lock/Unlock</li>
        <li data-action="delete" class="danger">Delete Tab</li>
      </ul>
    </div>

    <div id="renameModal" class="mini-modal">
      <div class="mini-modal__content rename-modal__content">
        <div class="mini-modal__header">Rename Tab</div>
        <input id="renameInput" type="text" class="rename-modal__input" />
        <div class="mini-modal__actions rename-modal__actions">
          <button id="renameCancelBtn" class="ghost">Cancel</button>
          <button id="renameSaveBtn">Save</button>
        </div>
      </div>
    </div>

    <div id="colorModal" class="mini-modal">
      <div class="mini-modal__content">
        <div class="mini-modal__header">Choose Color</div>
        <div id="colorSwatches" class="color-swatch-grid"></div>
        <div class="mini-modal__actions">
          <button id="colorCancelBtn" class="ghost">Cancel</button>
          <button id="colorSaveBtn">Save</button>
        </div>
      </div>
    </div>

    <div id="iconModal" class="mini-modal">
      <div class="mini-modal__content icon-modal__content">
        <div class="mini-modal__header">Choose Icon</div>
        <div id="iconChoices" class="icon-choices icon-grid icon-choose-grid"></div>
        <div class="mini-modal__actions">
          <button id="iconCancelBtn" class="ghost">Cancel</button>
          <button id="iconSaveBtn">Save</button>
        </div>
      </div>
    </div>
    <div id="screenshotModal" class="shot-modal">
      <div class="shot-modal-backdrop"></div>
      <div class="shot-modal-frame">
        <img id="shotModalImage" alt="Screenshot preview" />
      </div>
    </div>
    <div id="toast" class="toast hidden"></div>
  </body>
</html>
